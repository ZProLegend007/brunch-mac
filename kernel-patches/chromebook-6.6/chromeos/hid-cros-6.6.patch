--- a/drivers/iio/common/hid-sensors/hid-sensor-cros-compat.c
+++ b/drivers/iio/common/hid-sensors/hid-sensor-cros-compat.c
@@ -463,6 +463,7 @@ static int hid_als_probe(struct iio_dev *indio_dev)
 {
     struct hid_sensor_cros_compat_data *data = indio_dev->priv;
     int ret;

+    ret = devm_iio_kfifo_buffer_setup_ext(&indio_dev->dev, indio_dev, NULL, (const struct iio_dev_attr **)cros_compat_attributes);
     if (ret)
         goto err_free_data;

     data->hid_dev = hid_open_device(data->vendor_id, data->product_id);
@@ -840,6 +841,7 @@ static int hid_accel_3d_probe(struct iio_dev *indio_dev)
 {
     struct hid_sensor_cros_compat_data *data = indio_dev->priv;
     int ret;

+    ret = devm_iio_kfifo_buffer_setup_ext(&indio_dev->dev, indio_dev, NULL, (const struct iio_dev_attr **)cros_compat_attributes);
     if (ret)
         goto err_free_data;

     data->hid_dev = hid_open_device(data->vendor_id, data->product_id);
